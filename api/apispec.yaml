openapi: 3.0.0
info:
  title: Tawny
  description: |-
    A lastfm Api Proxy
  version: 0.0.3
  contact:
    name: Rye
    url: https://github.com/dozro/tawny/wiki
  license:
    name: Apache 2.0
    url: https://opensource.org/licenses/Apache-2.0
externalDocs:
  description: Read the documentation in the Github Wiki
  url: https://github.com/dozro/tawny/wiki
servers:
  - url: /api/v1
    description: the local Endpoint
  - url: https://tawny.itsrye.uk/api/v1
    description: the reference server
tags:
  - name: user
    description: Operations related to users
  - name: hmac
    description: Operations related to hmac
paths:
  '/user/{username}':
    get:
      description: |-
        Get User Info

        Lastfm Docu: https://www.last.fm/api/show/user.getInfo
      security:
        - defaultApiKey: []
      parameters:
        - name: username
          in: path
          required: true
          description: the username
          schema:
            $ref: '#/components/schemas/LastFMUsername'
      responses:
        '200':
          description: The fetched User Info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LFMUserInfo'
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      summary: Get User Info
      operationId: get_user
      tags:
        - user
  '/user/{username}/tracks/loved':
    get:
      description: 'Get loved tracks of specified User - https://www.last.fm/api/show/user.getLovedTracks'
      security:
        - defaultApiKey: []
      parameters:
        - name: limit
          in: query
          description: The maximum number of tracks to return.
          required: false
          schema:
            type: integer
            format: int32
            default: 25
            minimum: 1
            maximum: 250
        - name: start
          in: query
          description: The starting index for the results (used for pagination), equivalent to page.
          required: false
          schema:
            type: integer
            format: int64
            default: 1
            minimum: 1
            maximum: 32000
        - schema:
            type: integer
            format: int64
            default: -1
            minimum: -1
            maximum: 32000
          in: query
          name: page
          description: The page number (deprecated, use `start` instead)
          deprecated: true
        - name: username
          in: path
          required: true
          description: the username
          schema:
            $ref: '#/components/schemas/LastFMUsername'
        - name: signature
          in: query
          required: false
          description: the HMAC Signature for this OP
          schema:
            $ref: '#/components/schemas/HMACSignature'
      responses:
        '200':
          description: the fetched list of loved songs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WrapperUserLovedTracks'
        '307':
          description: a redirect
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      summary: Get Users Loved Tracks
      operationId: user_get_loved_tracks
      tags:
        - user
  '/user/{username}/tracks/recent':
    get:
      summary: Get a user's recent tracks
      description: Retrieve the most recently played tracks for a given Last.fm user.
      tags:
        - user
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LFMUserRecentTracks'
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: 'get_user_username_tracks_recent'
      parameters:
        - name: limit
          in: query
          description: The maximum number of tracks to return.
          required: false
          schema:
            type: integer
            format: int32
            default: 25
            minimum: 1
            maximum: 250
        - name: start
          in: query
          description: The starting index for the results (used for pagination), equivalent to page.
          required: false
          schema:
            type: integer
            format: int64
            default: 1
            minimum: 1
            maximum: 32000
        - schema:
            type: integer
            format: int64
            default: -1
            minimum: -1
            maximum: 32000
          in: query
          name: page
          description: The page number (deprecated, use `start` instead)
          deprecated: true
        - name: signature
          in: query
          required: false
          description: The HMAC signature for this operation.
          schema:
            $ref: '#/components/schemas/HMACSignature'
        - name: fetch_musicbrainz
          in: query
          required: false
          description: Include MusicBrainz metadata for tracks.
          schema:
            type: boolean
            default: false
        - name: username
          in: path
          required: true
          description: The Last.fm username to fetch recent tracks for.
          schema:
            $ref: '#/components/schemas/LastFMUsername'
  '/user/{username}/tracks/current':
    get:
      summary: get current track
      tags:
        - user
      parameters:
        - name: username
          in: path
          required: true
          description: The username
          schema:
            $ref: '#/components/schemas/LastFMUsername'
        - name: fetch_musicbrainz
          in: query
          required: false
          description: fetch assosicated data from MusicBrainz
          schema:
            type: boolean
            default: false
        - name: signature
          in: query
          required: false
          description: the HMAC Signature for this OP
          schema:
            $ref: '#/components/schemas/HMACSignature'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LFMUserRecentTracks'
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: 'get_user_username_tracks_current'
      description: equivalent to calling recent with limit of 1
  '/user/{username}/tracks/current/embed':
    get:
      summary: Get the current track as an embedded image
      description: Returns the current track for a user as an image. Equivalent to calling recent tracks with limit of 1.
      tags:
        - user
      parameters:
        - name: username
          in: path
          required: true
          description: The Last.fm username
          schema:
            $ref: '#/components/schemas/LastFMUsername'
        - name: signature
          in: query
          required: false
          description: Optional HMAC signature for this operation
          schema:
            $ref: '#/components/schemas/HMACSignature'
      responses:
        '200':
          description: Successfully generated image of the current track
          content:
            image/png:
              schema:
                type: string
                format: binary
            image/jpeg:
              schema:
                type: string
                format: binary
            image/tiff:
              schema:
                type: string
                format: binary
        '409':
          $ref: '#/components/responses/ApiErrorReturn409'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: 'get-user-username-tracks-current-embed'
  /hmac/sign/base64:
    post:
      summary: Sign a request in Base64
      description: Generate an HMAC signature for a given request payload and return it encoded in Base64.
      tags:
        - hmac
      responses:
        '200':
          description: Successfully signed request in Base64
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SignedBase64Request'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
      operationId: post-hmac-sign-base64
      parameters:
        - schema:
            type: string
          in: header
          name: HMAC-PSK
          description: HMAC Pre-Shared-Key
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HmacProxyRequest'
      security: []
  /hmac/sign:
    post:
      summary: Sign a request
      description: Generate an HMAC signature for a given request payload.
      tags:
        - hmac
      responses:
        '200':
          description: Successfully signed request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HmacProxyRequest'
            application/yaml:
              schema:
                $ref: '#/components/schemas/HmacProxyRequest'
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: post-hmac-sign
      parameters:
        - schema:
            type: string
          in: header
          name: HMAC-PSK
          description: HMAC Pre-Shared-Key
          required: true
        - schema:
            type: boolean
          in: query
          name: is_base64
          description: If true, the signed payload will be returned as Base64.
          required: false
        - schema:
            type: boolean
          in: query
          deprecated: true
          description: Deprecated alias for `is_base64`.
          name: isBase64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HmacProxyRequest'
      security: []
  /hmac/verify:
    post:
      summary: verify a hmac signed method
      tags:
        - hmac
      responses:
        '200':
          description: request success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Verification'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
      operationId: get-hmac-verify
      x-stoplight:
        id: rrb5zs04683wq
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignedRequest'
      parameters:
        - schema:
            type: string
          in: header
          name: HMAC-PSK
          required: true
        - name: isBase64
          description: if the request is base64 encoded
          required: false
          deprecated: true
          in: query
          schema:
            type: boolean
        - name: is_base64
          description: if the request is base64 encoded
          required: false
          in: query
          schema:
            type: boolean
      security: []
  /hmac/verify/against_server:
    post:
      summary: Execute a signed HMAC proxy request
      tags:
        - hmac
      parameters:
        - name: isBase64
          deprecated: true
          description: if the request is base64 encoded
          in: query
          schema:
            type: boolean
        - name: is_base64
          description: if the request is base64 encoded
          required: false
          in: query
          schema:
            type: boolean
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignedRequest'
      responses:
        '200':
          description: Proxy request succeeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Verification'
        '400':
          $ref: '#/components/responses/ApiErrorReturn400'
        '403':
          $ref: '#/components/responses/ApiErrorReturn403'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
      security: [ ]
  /hmac/execute:
    post:
      summary: Execute a signed HMAC proxy request
      tags:
        - hmac
      parameters:
        - name: is_base64
          description: if the request is base64 encoded
          required: false
          in: query
          schema:
            type: boolean
        - name: isBase64
          deprecated: true
          description: if the request is base64 encoded
          in: query
          schema:
            type: boolean
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignedRequest'
      responses:
        '200':
          description: Proxy request succeeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HmacProxyResponse'
        '400':
          description: Bad input or invalid JSON
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiError'
        '403':
          $ref: '#/components/responses/ApiErrorReturn403'
        '500':
          $ref: '#/components/responses/ApiErrorReturn500'
      security: []
    get:
      security: []
      summary: Execute a signed HMAC proxy request
      tags:
        - hmac
      parameters:
        - name: isBase64
          description: if the request is base64 encoded
          required: true
          deprecated: true
          in: query
          schema:
            type: boolean
            default: true
        - name: is_base64
          description: if the request is base64 encoded
          required: true
          in: query
          schema:
            type: boolean
            default: true
        - name: request
          description: base64 encoded request
          in: query
          required: true
          schema:
            type: string
        - name: signature
          in: query
          description: the signature of the request
          required: true
          schema:
            type: string
      responses:
        '200':
          description: successful request
  '/user/{username}/top/tracks':
    parameters:
      - name: limit
        in: query
        description: The maximum number of tracks to return.
        required: false
        schema:
          type: integer
          format: int32
          default: 25
          minimum: 1
          maximum: 250
      - name: start
        in: query
        description: The starting index for the results (used for pagination), equivalent to page.
        required: false
        schema:
          type: integer
          format: int64
          default: 1
          minimum: 1
          maximum: 32000
      - schema:
          type: integer
          format: int64
          default: -1
          minimum: -1
          maximum: 32000
        in: query
        name: page
        description: The page number (deprecated, use `start` instead)
        deprecated: true
      - schema:
          $ref: '#/components/schemas/LastFMUsername'
        name: username
        in: path
        required: true
    get:
      summary: get the top tracks
      tags:
        - user
      responses:
        '200':
          description: Request successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LFMUserTopTracks'
            application/xml:
              schema:
                $ref: '#/components/schemas/LFMUserTopTracks'
            application/yaml:
              schema:
                $ref: '#/components/schemas/LFMUserTopTracks'
        '401':
          $ref: '#/components/responses/ApiErrorReturn401'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: get-user-username-top-tracks
  '/user/{username}/top/albums':
    parameters:
      - name: limit
        in: query
        description: The maximum number of tracks to return.
        required: false
        schema:
          type: integer
          format: int32
          default: 25
          minimum: 1
          maximum: 250
      - name: start
        in: query
        description: The starting index for the results (used for pagination), equivalent to page.
        required: false
        schema:
          type: integer
          format: int64
          default: 1
          minimum: 1
          maximum: 32000
      - schema:
          type: integer
          format: int64
          default: -1
          minimum: 1
          maximum: 32000
        in: query
        name: page
        description: The page number (deprecated, use `start` instead)
        deprecated: true
      - schema:
          $ref: '#/components/schemas/LastFMUsername'
        name: username
        description: The Last.fm username for which to fetch top albums.
        in: path
        required: true
    get:
      summary: Get a user's top albums
      description: Retrieve the top albums listened to by a Last.fm user.
      tags: 
        - user
      responses:
        '200':
          description: Successful response with the user's top albums
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LFMUserTopAlbums'
            application/yaml:
              schema:
                $ref: '#/components/schemas/LFMUserTopAlbums'
            application/xml:
              schema:
                $ref: '#/components/schemas/LFMUserTopAlbums'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
      operationId: get-user-username-top-albums
  /musicbrainz/lookup/artist/by_mbid/{mbid}:
    parameters:
      - schema:
          $ref: '#/components/schemas/Mbid'
        name: mbid
        in: path
        required: true
    get:
      summary: lookup artist details by mbid
      tags:
        - musicbrainz
      operationId: get_musicbrainz_lookup_artist_by_mbid
      responses:
        '200':
          description: Request successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MusicBrainzArtist'
            application/yaml:
              schema:
                $ref: '#/components/schemas/MusicBrainzArtist'
            application/xml:
              schema:
                $ref: '#/components/schemas/MusicBrainzArtist'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
  /musicbrainz/lookup/recording/by_mbid/{mbid}:
    parameters:
      - schema:
          $ref: '#/components/schemas/Mbid'
        name: mbid
        description: The MusicBrainz ID of the recording to lookup.
        in: path
        required: true
    get:
      summary: lookup recording details by mbid
      description: Retrieve detailed information about a MusicBrainz recording using its MBID.
      tags:
        - musicbrainz
      operationId: get_musicbrainz_lookup_recording_by_mbid
      responses:
        '200':
          description: Request successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MusicBrainzRecording'
            application/xml:
              schema:
                $ref: '#/components/schemas/MusicBrainzRecording'
            application/yaml:
              schema:
                $ref: '#/components/schemas/MusicBrainzRecording'
        '503':
          $ref: '#/components/responses/EndpointDisabledByServer'
security:
  - defaultApiKey: []
components:
  securitySchemes:
    defaultApiKey:
      description: The Api Key you obtained from lastfm
      type: apiKey
      name: Authorization
      in: header
  schemas:
    ApiErrorCode:
      type: number
      enum:
        - 0
        - 1
        - 2
        - 3
    Success:
      type: boolean
      description: If the operation was successful
      example: false
    Verification:
      type: object
      description: whether the verification was successful
      properties:
        message:
          type: string
        success:
          type: boolean
    ApiError:
      type: object
      title: API Error
      description: Standard structure for API errors.
      properties:
        http_code:
          type: number
          description: The HTTP status code returned by the server.
          example: 403
          minimum: 100
          maximum: 599
        internal_error_code:
          type: number
          description: Internal application-specific error code.
          example: 1
        internal_error_msg:
          type: string
          nullable: true
          description: Optional internal error message providing additional context.
          example: "Signature verification failed in backend service."
        success:
          type: boolean
          description: If the operation was successful
          default: false
        data:
          $ref: '#/components/schemas/errorAttachedData'
        message:
          type: string
          description: Human-readable error message describing the failure.
          example: "Invalid HMAC signature"
      required:
        - success
        - message
      example:
        http_code: 403
        internal_error_code: 1
        internal_error_msg: "Signature verification failed in backend service."
        success: false
        data:
          field: "signature"
          detail: "HMAC mismatch"
        message: "Invalid HMAC signature"
    HmacProxyApiIdentifier:
      title: HMAC Proxy Identifier (deprecated)
      type: string
      example: /user/
      deprecated: true
      enum:
        - "/user/"
        - "/user/tracks/current/"
        - "/user/tracks/current/embed"
        - "/user/tracks/recent/"
    HmacProxyApiIdentifierV2:
      title: HMAC Proxy Identifier
      description: "new version of ApiIdentifier"
      type: string
      example: user
      enum:
        - "user"
        - "user_tracks_current"
        - "user_tracks_current_embed"
        - "user_tracks_recent"
    HmacProxyApiParameters:
      description: The Api Parameters you want to provide
      title: HMAC Proxy Api Parameter
      type: object
      required:
        - username
      properties:
        username:
          type: string
          example: alice
          description: The Username you want to specify
        page:
          type: number
          example: 1
          description: The page of the result you want to get
        limit:
          type: number
          example: 15
          description: The limit of a page
    HmacProxyResponse:
      type: object
      title: HMAC Proxy Response
      properties:
        signature:
          type: string
    HmacProxyMethod:
      type: string
      title: HMAC Proxy Method
      description: lowercase http method
      example: get
      enum:
        - "get"
        - "post"
        - "head"
    HmacProxyRequest:
      type: object
      title: HMAC Proxy Request
      properties:
        method:
          $ref: '#/components/schemas/HmacProxyMethod'
        api_identifier:
          $ref: '#/components/schemas/HmacProxyApiIdentifierV2'
        api_parameters:
          $ref: '#/components/schemas/HmacProxyApiParameters'
        body:
          type: string
          nullable: true
          default: null
      required:
        - method
        - api_identifier
    SignedRequest:
      type: object
      deprecated: true
      title: "HMAC signed Request (not encoded)"
      description: "The signed Request; not base64 encoded"
      properties:
        signature:
          type: string
          example: 4acfb7f8b2...
          pattern: "^[A-Fa-f0-9]{64}$"
          minLength: 64
          maxLength: 64
        request:
          $ref: '#/components/schemas/HmacProxyRequest'
      required:
        - signature
        - request
    SignedBase64Request:
      type: object
      title: "HMAC signed Request (base64 encoded)"
      description: "The HMAC signed Request - base64 encoded"
      properties:
        signature:
          type: string
          example: 4acfb7f8b2...
          description: The HMAC signature
          pattern: "^[A-Fa-f0-9]{64}$"
          minLength: 64
          maxLength: 64
        request:
          type: string
          description: The base64 encoded Request
          pattern: "^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"
      required:
        - signature
        - request
    LFMUserInfo:
      title: Last.fm User Info
      description: The Last.fm user information object.
      properties:
        id:
          type: number
          description: Unique numeric identifier of the user.
          example: 123456
          deprecated: true
        name:
          $ref: '#/components/schemas/LastFMUsername'
        realname:
          type: string
          description: The real name of the user.
          example: "John Doe"
          nullable: true
        url:
          $ref: '#/components/schemas/LastFMURL'
        imageurl:
          type: string
          format: url
          description: URL of the user's profile image.
          example: "https://lastfm.freetls.fastly.net/i/u/300x300/abcdef123456.png"
        country:
          type: string
          description: The user's country.
          example: "United States"
          nullable: true
        age:
          type: number
          description: The user's age, if available.
          example: 28
          minimum: 0
        gender:
          type: string
          description: The user's gender.
          pattern: "^(m|f|n|)$"
        subscriber:
          type: integer
        playcount:
          type: integer
          description: Total number of tracks the user has played.
          example: 2345
          minimum: 0
        playlists:
          type: integer
          description: Total number of playlists the user has.
          example: 5
          minimum: 0
        bootstrap:
          type: integer
          description: Bootstrap value (used internally by Last.fm).
          example: 0
          default: 0
          minimum: 0
        registered:
          type: string
          format: date
          description: The date the user registered on Last.fm.
          example: "2012-03-15"
      required:
        - name
        - url
    HttpRequestMeta:
      title: HTTP Request
      description: Metadata describing an HTTP request.
      type: object
      properties:
        host:
          type: string
          description: The hostname of the server receiving the request.
          example: "example.org"
          pattern: "^(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$"
        query:
          type: string
          description: The query string of the request, if any (e.g., `?id=123&sort=asc`).
          nullable: true
          example: "?id=123&sort=asc"
          pattern: "^\\?.*$"
        path:
          type: string
          description: The path portion of the URL being requested.
          example: "/api/meow"
          pattern: "^/.*$"
        method:
          type: string
          description: The HTTP method used for the request.
          example: "GET"
          pattern: "^(GET|POST|PUT|PATCH|DELETE|HEAD|OPTIONS|TRACE|CONNECT)$"
      example:
        host: "example.org"
        query: "?id=123&sort=asc"
        path: "/api/meow"
        method: "GET"
    errorAttachedData:
      description: Data attached to Error
      type: object
      properties:
        request:
          $ref: '#/components/schemas/HttpRequestMeta'
    internalError:
      description: internal server error
      title: Internal Server Error Message
      deprecated: true
      properties:
        code:
          type: number
        error:
          type: string
        data:
          $ref: '#/components/schemas/errorAttachedData'
    UserLovedTracks:
      type: array
      items:
        $ref: '#/components/schemas/LFMTrack'
    WrapperUserLovedTracks:
      type: object
      properties:
        loved_tracks:
          $ref: '#/components/schemas/UserLovedTracks'
      description: The tracks a user loves
    LFMTrack:
      title: LastFM Track
      type: object
      properties:
        name:
          type: string
          maxLength: 100
          minLength: 1
          description: Track Name
        now_playing:
          type: boolean
          description: If the track is currently playing (only defined when requesting recent tracks)
          nullable: true
        rank:
          nullable: true
          description: "only defined when requesting top tracks"
        mbid:
          $ref: '#/components/schemas/Mbid'
        url:
          type: string
          format: url
          description: The url to the lastfm entry of the track
        date:
          type: string
          format: date
        image:
          type: string
          format: url
          description: album cover image
        artist:
          $ref: '#/components/schemas/LFMArtist'
        artist_mbid:
          $ref: '#/components/schemas/Mbid'
        artist_music_brainz:
          $ref: '#/components/schemas/MusicBrainzArtist'
        track_music_brainz:
          $ref: '#/components/schemas/MusicBrainzRecording'
        streamable:
          type: integer
          format: int32
          minimum: 0
          maximum: 255
    LFMUserRecentTracks:
      type: object
      description: The Tracks a user listened to recently
      properties:
        track:
          type: array
          items:
            $ref: '#/components/schemas/LFMTrack'
    UnauthorizedResponse:
      type: object
      properties:
        code:
          type: integer
          format: int64
          example: 403
          minimum: 100
          maximum: 599
        error:
          type: string
    LFMUserTopAlbums:
      title: Last.fm top albums of a user
      description: Represents the list of top albums for a given Last.fm user, including ranking and play statistics for each album.
      type: object
      properties:
        album:
          type: array
          description: A list of albums ordered by the user's listening behavior.
          items:
            $ref: '#/components/schemas/LFMUserAlbums'
    LFMUserAlbums:
      title: Last.fm Album
      description: Represents an album entry in a Last.fm user's library, including ranking, metadata, and reference identifiers.
      type: object
      properties:
        rank:
          type: integer
          format: int32
          minimum: 1
          maximum: 255
          description: The album's position within the user's ranked list, typically based on play count or Last.fm sorting.
        name:
          type: string
          description: The name of the album.
        playcount:
          type: integer
          format: int64
          minimum: 0
          maximum: 32000
          description: The number of times the user has played tracks from this album.
        mbid:
          $ref: '#/components/schemas/Mbid'
        url:
          type: string
          format: url
          nullable: false
          description: The URL of the album's page on Last.fm.
    LFMUserTopTracks:
      title: Last.fm Top tracks of a user
      description: Represents the list of top tracks for a user on Last.fm, ordered by listening frequency.
      type: object
      properties:
        track:
          type: array
          description: A list of tracks ranked by how often the user has listened to them.
          items:
            $ref: '#/components/schemas/LFMTrack'
      example:
        track:
          - name: "In the End"
            rank: 1
            now_playing: false
            playcount: 152
            url: "https://www.last.fm/music/Linkin+Park/_/In+the+End"
            mbid: "c3b33b69-9961-4e1d-b76e-7ee3dd7c6a3d"
            artist:
              name: "Linkin Park"
              mbid: "f59c5520-5f46-4d2c-b2c4-822eabf53419"
              url: "https://www.last.fm/music/Linkin+Park"
          - name: "Numb"
            rank: 2
            now_playing: false
            playcount: 131
            url: "https://www.last.fm/music/Linkin+Park/_/Numb"
            mbid: "d9160f5a-bc74-4cc2-9e2c-c8733f91c82f"
            artist:
              name: "Linkin Park"
              mbid: "f59c5520-5f46-4d2c-b2c4-822eabf53419"
              url: "https://www.last.fm/music/Linkin+Park"
          - name: "The Emptiness Machine"
            album: ""
            rank: 3
            playcount: 53
            mbid: "0815f294-becd-4544-bad0-5d43b7426cce"
            artist_music_brainz:
                api_error:
                  http_code: 0
                  internal_error_code: 0
                  internal_error_msg: ""
                  message: ""
                  data: null
                  success: false
                  date: ""
                sort_name: ""
                Disambiguation: ""
                isni_list:
                  Isni: null
                Country: ""
                area:
                  name: ""
                  sort_name: ""
                  alias_list: { }
                begin_area:
                  name: ""
                  sort_name: ""
                  alias_list: { }
                life_span:
                  Begin: ""
                  End: ""
                  Ended: ""
                alias_list: { }
            track_music_brainz:
                api_error:
                  http_code: 0
                  internal_error_code: 0
                  internal_error_msg: ""
                  message: ""
                  data: null
                  success: false
                  date: ""
                Title: ""
                Length: 0
                artist_credit: { }
                release_list: { }
                isrc_list:
                  isrc: { }
            url: "https://www.last.fm/music/Linkin+Park/_/The+Emptiness+Machine"
            image: "https://lastfm.freetls.fastly.net/i/u/300x300/2a96cbd8b46e442fc41c2b86b821562f.png"
            artist:
                name: ""
                mbid: ""
                url: "https://www.last.fm/music/Linkin+Park"
            streamable: 0
    LFMArtist:
      title: Last.fm Artist
      description: Represents an artist as returned by the Last.fm API, including basic metadata such as the artist name, MusicBrainz identifier, and a link to the artistâ€™s Last.fm page.
      type: object
      properties:
        name:
          type: string
          example: Linkin Park
          description: The name of the artist.
        mbid:
          $ref: '#/components/schemas/Mbid'
        url:
          type: string
          format: url
          example: 'https://www.last.fm/music/Linkin+Park'
          description: The URL of the artist's page on Last.fm, providing access to their profile, biography, tracks, albums, and related listening statistics.
    Mbid:
      title: MusicBrainz ID
      description: A unique identifier assigned by the MusicBrainz database, used to unambiguously reference artists, releases, recordings, or other music-related entities.
      type: string
      format: uuid
      example: 0383dadf-2a4e-4d10-a46a-e9e041da8eb3
    MusicBrainzRecording:
      title: MusicBrainz Recording
      description: Detailed information about a specific MusicBrainz recording.
      type: object
      properties:
        api_error:
          $ref: '#/components/schemas/ApiError'
        text:
          type: string
          description: Raw character data from XML content.
        id:
          $ref: '#/components/schemas/Mbid'
        title:
          type: string
          description: Recording title.
          example: "Numb"
        length:
          type: integer
          description: Length of the recording in milliseconds.
          example: 185000
        artist-credit:
          $ref: "#/components/schemas/MusicBrainzArtistCredit"
        release-list:
          $ref: "#/components/schemas/MusicBrainzRecordingReleaseList"
        isrc-list:
          $ref: "#/components/schemas/MusicBrainzIsrcList"
      additionalProperties: false

    MusicBrainzArtistCredit:
        title: MusicBrainz Artist Credit
        description: Contains artist credit information showing who performed on the recording.
        type: object
        properties:
          text:
            type: string
            description: Raw character data.
          name-credit:
            type: array
            description: List of credited artists.
            items:
              $ref: "#/components/schemas/MusicBrainzNameCredit"
        additionalProperties: false
        example:
          name-credit:
            - joinphrase: " & "
              artist:
                id: "5b11f4ce-a62d-471e-81fc-a69a8278c7da"
                name: "Nirvana"
                sort-name: "Nirvana"


    MusicBrainzNameCredit:
        title: MusicBrainz Name Credit
        description: A single credit entry referencing an artist in the artist-credit list.
        type: object
        properties:
          text:
            type: string
            description: Raw text data.
          joinphrase:
            type: string
            description: How this artist is joined with the next one (e.g. "feat.", " & ").
            example: "feat."
          artist:
            $ref: "#/components/schemas/MusicBrainzNameCreditArtist"
        additionalProperties: false
        example:
          joinphrase: ""
          artist:
            id: "5b11f4ce-a62d-471e-81fc-a69a8278c7da"
            name: "Nirvana"

    MusicBrainzNameCreditArtist:
        title: MusicBrainz Name Credit Artist
        description: Metadata describing an artist credited in a recording.
        type: object
        properties:
          text:
            type: string
          id:
            $ref: '#/components/schemas/Mbid'
          type:
            type: string
            description: Artist type (e.g. Person, Group).
            example: "Group"
          type-id:
            $ref: '#/components/schemas/Mbid'
          name:
            type: string
            description: Artist display name.
            example: "Nirvana"
          sort_name:
            type: string
            description: Canonical sorting name.
            example: "Nirvana"
        additionalProperties: false
        example:
          id: "5b11f4ce-a62d-471e-81fc-a69a8278c7da"
          type: "Group"
          name: "Nirvana"
          sort-name: "Nirvana"

    MusicBrainzRecordingReleaseList:
        type: object
        description: Contains releases associated with the recording (albums, singles, etc.).
        properties:
          text:
            type: string
          count:
            type: string
            description: Total number of releases.
            example: "1"
          release:
            type: array
            description: Release entries.
            items:
              $ref: "#/components/schemas/MusicBrainzRecordingRelease"
        additionalProperties: false
        example:
          count: "1"
          release:
            - id: "1d9f9d3c-1c62-4b4a-8cc9-dc61d1c59d84"
              title: "Meteora"

    MusicBrainzRecordingRelease:
        title: MusicBrainz Recording Release
        description: A release (album, EP, etc.) containing this recording.
        type: object
        properties:
          text:
            type: string
          id:
            $ref: '#/components/schemas/Mbid'
          title:
            type: string
            description: Release title.
            example: "Meteora"
        additionalProperties: false
        example:
          id: "1d9f9d3c-1c62-4b4a-8cc9-dc61d1c59d84"
          title: "Meteora"

    MusicBrainzIsrcList:
        title: MusicBrainz ISRC List
        description: International Standard Recording Codes (ISRCs) associated with the recording.
        type: object
        properties:
          count:
            type: string
            description: Number of ISRC entries.
            example: "1"
          isrc:
            $ref: "#/components/schemas/MusicBrainzIsrc"
        additionalProperties: false
        example:
          count: "1"
          isrc:
            id: "USWB10300015"

    MusicBrainzIsrc:
        type: object
        description: Single ISRC entry for the recording.
        properties:
          id:
            type: string
            description: The ISRC code.
            example: "USWB10300015"
        additionalProperties: false
        example:
          id: "USWB10300015"

    MusicBrainzArtist:
      type: object
      properties:
        api_error:
          $ref: '#/components/schemas/ApiError'
        name:
          type: string
        sort_name:
          type: string
        disambiguation:
          type: string
    LastFMUsername:
      type: string
      title: LastFM Username
      example: alice
      pattern: "^[a-zA-Z0-9_-]{3,20}$"
      minLength: 3
      maxLength: 20
    LastFMURL:
      type: string
      format: url
      title: LastFM URL
      pattern: "^https:\\/\\/last\\.fm"
    HMACSignature:
      title: HMAC Signature
      type: string
      pattern: "^[A-Fa-f0-9]{64}$"
      minLength: 64
      maxLength: 64
  responses:
    EndpointDisabledByServer:
      description: The Server disabled this endpoint
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
    ApiErrorReturn400:
      description: Api Error 400
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
    ApiErrorReturn401:
      description: Represents an error response returned when the client is not authorized to access the requested resource.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
    ApiErrorReturn403:
      description: Api Error 403
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
    ApiErrorReturn409:
      description: Internally inconsistent Data occured
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
    ApiErrorReturn500:
      description: Api Error 500
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/yaml:
          schema:
            $ref: '#/components/schemas/ApiError'
        application/xml:
          schema:
            $ref: '#/components/schemas/ApiError'
x-internal: true
